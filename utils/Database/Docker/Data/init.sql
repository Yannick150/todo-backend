USE [master]
GO

IF DB_ID('TodoApp') IS NOT NULL   
BEGIN
	ALTER DATABASE [TodoApp] SET  SINGLE_USER WITH ROLLBACK IMMEDIATE			
	DROP DATABASE [TodoApp]	
END
CREATE DATABASE [TodoApp]  
GO

USE [TodoApp]  
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
CREATE TABLE [dbo].[todos] (
  [Id] UNIQUEIDENTIFIER NOT NULL
    CONSTRAINT [PK_todos] PRIMARY KEY CLUSTERED
    DEFAULT NEWSEQUENTIALID(),   
  [Name] NVARCHAR(255) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Tags] NVARCHAR(MAX) NULL,
  [Created_At] DATETIMEOFFSET(6) NOT NULL
    CONSTRAINT [DF_todos_Created_At] DEFAULT SYSDATETIMEOFFSET(),
  [Deadline] DATETIMEOFFSET(6) NULL, 
  [Completed] BIT NOT NULL
    CONSTRAINT [DF_todos_Completed] DEFAULT 0
);
GO